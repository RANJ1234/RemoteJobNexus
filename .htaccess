RewriteEngine On

# Handle direct access to passenger_wsgi.py
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /passenger_wsgi\.py
RewriteRule ^passenger_wsgi\.py$ / [L,R=301]

# Send all requests to passenger_wsgi.py
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ passenger_wsgi.py/$1 [L,QSA]

# Handle FCGI correctly
AddHandler fcgid-script .py
AddHandler cgi-script .py
Options +ExecCGI +FollowSymLinks -Indexes

# Add index files
DirectoryIndex index.html index.php index.py passenger_wsgi.py

# Set default character set
AddDefaultCharset UTF-8

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/x-javascript
</IfModule>

# PHP handler
<IfModule mod_fcgid.c>
   AddHandler fcgid-script .php
</IfModule> 